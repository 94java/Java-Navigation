{"version":3,"file":"config.js","sources":["../../src/client/config.ts"],"sourcesContent":["import { defineClientConfig, usePageFrontmatter } from \"@vuepress/client\";\nimport { computed, defineComponent, h } from \"vue\";\nimport CommentProvider from \"vuepress-plugin-comment2/provider\";\n\nimport type { VNode } from \"vue\";\nimport type {\n  CommentOptions,\n  CommentPluginFrontmatter,\n} from \"../shared/index.js\";\n\ndeclare const COMMENT_OPTIONS: CommentOptions;\n\nconst enableComment = COMMENT_OPTIONS.comment !== false;\n\nexport default defineClientConfig({\n  enhance: ({ app }) => {\n    const CommentService = defineComponent({\n      name: \"CommentService\",\n\n      props: {\n        /**\n         * Whether the component is in darkmode\n         *\n         * 组件是否处于夜间模式\n         */\n        darkmode: Boolean,\n      },\n\n      setup(props) {\n        const frontmatter = usePageFrontmatter<CommentPluginFrontmatter>();\n\n        const enabled = computed(() => {\n          return (\n            frontmatter.value.comment ||\n            (enableComment && frontmatter.value.comment !== false)\n          );\n        });\n\n        return (): VNode | null =>\n          h(CommentProvider, {\n            darkmode: props.darkmode,\n            style: { display: enabled.value ? \"block\" : \"none\" },\n          });\n      },\n    });\n\n    app.component(\"CommentService\", CommentService);\n  },\n});\n"],"names":["enableComment","defineClientConfig","app","CommentService","defineComponent","props","frontmatter","usePageFrontmatter","enabled","computed","h","CommentProvider"],"mappings":"0LAYA,MAAMA,EAAgB,gBAAgB,UAAY,GAElD,IAAeC,EAAAA,EAAmB,CAChC,QAAS,CAAC,CAAE,IAAAC,CAAI,IAAM,CACpB,MAAMC,EAAiBC,EAAgB,CACrC,KAAM,iBAEN,MAAO,CAML,SAAU,OACZ,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAcC,EAA6C,EAE3DC,EAAUC,EAAS,IAErBH,EAAY,MAAM,SACjBN,GAAiBM,EAAY,MAAM,UAAY,EAEnD,EAED,MAAO,IACLI,EAAEC,EAAiB,CACjB,SAAUN,EAAM,SAChB,MAAO,CAAE,QAASG,EAAQ,MAAQ,QAAU,MAAO,CACrD,CAAC,CACL,CACF,CAAC,EAEDN,EAAI,UAAU,iBAAkBC,CAAc,CAChD,CACF,CAAC"}