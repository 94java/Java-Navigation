import{useEventListener as o}from"@vueuse/core";import{checkIsMobile as f}from"vuepress-shared/client";import{ref as d,computed as m,unref as n,onMounted as c,isRef as b,watch as v,defineComponent as $,h}from"vue";import"../styles/bili-bili.scss";const g=t=>typeof t=="string"?t:`${t}px`,w=(t,e=0)=>{const r=d(),a=m(()=>g(n(t.width)||"100%")),l=d("auto"),u=p=>{const s=n(t.height),y=n(t.ratio)||16/9;return s?g(s):`${Number(p)/y+n(e)}px`},i=()=>{l.value=u(r.value.clientWidth)};return c(()=>{i(),b(e)&&v(e,()=>i()),o("orientationchange",()=>i()),o("resize",()=>i())}),{el:r,width:a,height:l}};var B=$({name:"BiliBili",props:{bvid:{type:String,required:!0},title:{type:String,default:"A BiliBili video"},page:{type:Number,default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:Number,default:16/9},time:{type:Number,default:0},lowQuality:Boolean,noDanmaku:Boolean},setup(t){const e=d(!1),r=m(()=>e.value?0:68),a=()=>{e.value=f(navigator.userAgent)||l.value.clientWidth<640},{el:l,width:u,height:i}=w(t,r),p=m(()=>`https://player.bilibili.com/player.html?bvid=${t.bvid}&t=${t.time}&high_quality=${t.lowQuality?0:1}&page=${t.page}&danmaku=${t.noDanmaku?0:1}`);return c(()=>{a(),o("orientationchange",()=>a()),o("resize",()=>a())}),()=>[h("div",{class:"bili-desc"},h("a",{class:"sr-only",href:p.value},t.title)),h("iframe",{ref:l,src:`https://player.bilibili.com/player.html?bvid=${t.bvid}&t=${t.time}&high_quality=${t.lowQuality?0:1}&page=${t.page}&danmaku=${t.noDanmaku?0:1}`,title:t.title,class:"bili-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:u.value,height:i.value}})]}});export{B as default};
//# sourceMappingURL=BiliBili.js.map
