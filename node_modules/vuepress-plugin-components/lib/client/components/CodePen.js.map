{"version":3,"file":"CodePen.js","sources":["../../../src/client/components/CodePen.ts"],"sourcesContent":["import { useScriptTag } from \"@vueuse/core\";\nimport { computed, defineComponent, onMounted, h } from \"vue\";\n\nimport type { PropType, VNode } from \"vue\";\n\nimport \"../styles/code-pen.scss\";\n\ndeclare global {\n  interface Window {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    __CPEmbed: (selector: string) => void;\n  }\n}\n\nexport default defineComponent({\n  name: \"CodePen\",\n\n  props: {\n    /**\n     * CodePen link\n     *\n     * CodePen 链接\n     */\n    link: { type: String, default: \"\" },\n\n    /**\n     * CodePen username\n     *\n     * CodePen 用户名\n     */\n    user: { type: String, default: \"\" },\n\n    /**\n     * CodePen hash\n     *\n     * CodePen hash\n     */\n    slugHash: { type: String, default: \"\" },\n\n    /**\n     * CodePen title\n     *\n     * CodePen 标题\n     */\n    title: { type: String, default: \"\" },\n\n    /**\n     * CodePen height\n     *\n     * CodePen 高度\n     */\n    height: { type: Number, default: 380 },\n\n    /**\n     * CodePen theme\n     *\n     * CodePen 主题\n     */\n    theme: {\n      type: String as PropType<\"default\" | \"light\" | \"dark\">,\n      default: \"default\",\n    },\n\n    /**\n     * CodePen default tab\n     *\n     * CodePen 默认标签\n     */\n    defaultTab: {\n      type: Array as PropType<string[]>,\n      default: () => [\"result\"],\n    },\n\n    /**\n     * CodePen loading status\n     *\n     * CodePen 加载状态\n     */\n    status: {\n      type: String as PropType<\"autoload\" | \"preview\" | \"clicktorun\">,\n      default: \"preview\",\n    },\n  },\n\n  setup(props) {\n    const getInfo = (): {\n      user: string | undefined;\n      slugHash: string | undefined;\n    } => {\n      const result =\n        /(?:^(?:https?:)?\\/\\/codepen.io\\/|^\\/|^)(.*?)\\/(?:pen|embed)\\/(.*?)\\/?$/.exec(\n          props.link\n        );\n\n      return {\n        user: result?.[1],\n        slugHash: result?.[2],\n      };\n    };\n\n    const user = computed(() => getInfo().user || props.user);\n\n    const slugHash = computed(() => getInfo().slugHash || props.slugHash);\n\n    useScriptTag(\"https://static.codepen.io/assets/embed/ei.js\");\n\n    onMounted(() => {\n      if (props.status !== \"clicktorun\") {\n        const intervalID = setInterval(() => {\n          if (window.__CPEmbed) {\n            window.__CPEmbed(`.codepen-${slugHash.value}`);\n            clearInterval(intervalID);\n          }\n        }, 500);\n      }\n    });\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\"codepen-wrapper\", `codepen-${slugHash.value}`],\n          \"data-height\": props.height,\n          \"data-theme-id\": props.theme,\n          \"data-user\": user.value,\n          \"data-slug-hash\": slugHash.value,\n          \"data-default-tab\": props.defaultTab.join(\",\"),\n          \"data-pen-title\": props.title,\n          \"data-preview\": props.status === \"preview\",\n          user: props.user,\n        },\n        [\n          props.status === \"clicktorun\"\n            ? h(\n                \"button\",\n                {\n                  class: \"codepen-button\",\n                  onClick: () => {\n                    window.__CPEmbed(`.codepen-${slugHash.value}`);\n                  },\n                },\n                \"Run Code\"\n              )\n            : null,\n          h(\"span\", [\n            \"See the Pen \",\n            h(\"a\", { href: props.link }, [props.title]),\n            \" by \",\n            h(\"a\", { href: `https://codepen.io/${user.value}` }, [user.value]),\n            \" on \",\n            h(\"a\", { href: `https://codepen.io` }, [\"CodePen\"]),\n            \".\",\n          ]),\n        ]\n      );\n  },\n});\n"],"names":["defineComponent","props","getInfo","result","user","computed","slugHash","useScriptTag","onMounted","intervalID","h"],"mappings":"sJAcA,IAAeA,EAAAA,EAAgB,CAC7B,KAAM,UAEN,MAAO,CAML,KAAM,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOlC,KAAM,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOlC,SAAU,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOtC,MAAO,CAAE,KAAM,OAAQ,QAAS,EAAG,EAOnC,OAAQ,CAAE,KAAM,OAAQ,QAAS,GAAI,EAOrC,MAAO,CACL,KAAM,OACN,QAAS,SACX,EAOA,WAAY,CACV,KAAM,MACN,QAAS,IAAM,CAAC,QAAQ,CAC1B,EAOA,OAAQ,CACN,KAAM,OACN,QAAS,SACX,CACF,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAU,IAGX,CACH,MAAMC,EACJ,yEAAyE,KACvEF,EAAM,IACR,EAEF,MAAO,CACL,KAAME,GAAA,KAAA,OAAAA,EAAS,GACf,SAAUA,GAAA,KAAAA,OAAAA,EAAS,EACrB,CACF,EAEMC,EAAOC,EAAS,IAAMH,EAAQ,EAAE,MAAQD,EAAM,IAAI,EAElDK,EAAWD,EAAS,IAAMH,EAAQ,EAAE,UAAYD,EAAM,QAAQ,EAEpE,OAAAM,EAAa,8CAA8C,EAE3DC,EAAU,IAAM,CACd,GAAIP,EAAM,SAAW,aAAc,CACjC,MAAMQ,EAAa,YAAY,IAAM,CAC/B,OAAO,YACT,OAAO,UAAU,YAAYH,EAAS,OAAO,EAC7C,cAAcG,CAAU,EAE5B,EAAG,GAAG,CACR,CACF,CAAC,EAEM,IACLC,EACE,MACA,CACE,MAAO,CAAC,kBAAmB,WAAWJ,EAAS,OAAO,EACtD,cAAeL,EAAM,OACrB,gBAAiBA,EAAM,MACvB,YAAaG,EAAK,MAClB,iBAAkBE,EAAS,MAC3B,mBAAoBL,EAAM,WAAW,KAAK,GAAG,EAC7C,iBAAkBA,EAAM,MACxB,eAAgBA,EAAM,SAAW,UACjC,KAAMA,EAAM,IACd,EACA,CACEA,EAAM,SAAW,aACbS,EACE,SACA,CACE,MAAO,iBACP,QAAS,IAAM,CACb,OAAO,UAAU,YAAYJ,EAAS,OAAO,CAC/C,CACF,EACA,UACF,EACA,KACJI,EAAE,OAAQ,CACR,eACAA,EAAE,IAAK,CAAE,KAAMT,EAAM,IAAK,EAAG,CAACA,EAAM,KAAK,CAAC,EAC1C,OACAS,EAAE,IAAK,CAAE,KAAM,sBAAsBN,EAAK,OAAQ,EAAG,CAACA,EAAK,KAAK,CAAC,EACjE,OACAM,EAAE,IAAK,CAAE,KAAM,oBAAqB,EAAG,CAAC,SAAS,CAAC,EAClD,GACF,CAAC,CACH,CACF,CACJ,CACF,CAAC"}