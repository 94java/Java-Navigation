{"version":3,"file":"BackToTop.js","sources":["../../../src/client/components/icons.ts","../../../src/client/components/BackToTop.ts"],"sourcesContent":["import { h } from \"vue\";\nimport { IconBase } from \"vuepress-shared/client\";\n\nimport type { FunctionalComponent } from \"vue\";\n\nexport const BackToTopIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"back-to-top\" }, () => [\n    h(\"path\", {\n      d: \"M512 843.2c-36.2 0-66.4-13.6-85.8-21.8-10.8-4.6-22.6 3.6-21.8 15.2l7 102c.4 6.2 7.6 9.4 12.6 5.6l29-22c3.6-2.8 9-1.8 11.4 2l41 64.2c3 4.8 10.2 4.8 13.2 0l41-64.2c2.4-3.8 7.8-4.8 11.4-2l29 22c5 3.8 12.2.6 12.6-5.6l7-102c.8-11.6-11-20-21.8-15.2-19.6 8.2-49.6 21.8-85.8 21.8z\",\n    }),\n    h(\"path\", {\n      d: \"m795.4 586.2-96-98.2C699.4 172 513 32 513 32S324.8 172 324.8 488l-96 98.2c-3.6 3.6-5.2 9-4.4 14.2L261.2 824c1.8 11.4 14.2 17 23.6 10.8L419 744s41.4 40 94.2 40c52.8 0 92.2-40 92.2-40l134.2 90.8c9.2 6.2 21.6.6 23.6-10.8l37-223.8c.4-5.2-1.2-10.4-4.8-14zM513 384c-34 0-61.4-28.6-61.4-64s27.6-64 61.4-64c34 0 61.4 28.6 61.4 64S547 384 513 384z\",\n    }),\n  ]);\n\nBackToTopIcon.displayName = \"BackToTopIcon\";\n\nexport const CloseIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"close\" }, () =>\n    h(\"path\", {\n      d: \"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z\",\n    })\n  );\n\nCloseIcon.displayName = \"CloseIcon\";\n","import { useEventListener, useDebounceFn } from \"@vueuse/core\";\nimport { usePageFrontmatter } from \"@vuepress/client\";\nimport { Transition, computed, defineComponent, h, onMounted, ref } from \"vue\";\nimport { useLocaleConfig } from \"vuepress-shared/client\";\nimport { BackToTopIcon } from \"./icons.js\";\n\nimport \"../styles/back-to-top.scss\";\n\nimport type { VNode } from \"vue\";\nimport type { BackToTopLocaleConfig } from \"../../shared/index.js\";\n\ndeclare const BACK_TO_TOP_LOCALES: BackToTopLocaleConfig;\n\nexport default defineComponent({\n  name: \"BackToTop\",\n\n  props: {\n    /**\n     * Threshold distance in pixels to display the button\n     *\n     * 显示按钮的阈值距离，单位为像素\n     */\n    threshold: {\n      type: Number,\n      default: 300,\n    },\n  },\n\n  setup(props) {\n    const pageFrontmatter = usePageFrontmatter<{ backToTop?: boolean }>();\n    const locale = useLocaleConfig(BACK_TO_TOP_LOCALES);\n\n    /** Scroll distance */\n    const scrollTop = ref(0);\n\n    /** Whether to display button */\n    const show = computed<boolean>(\n      () =>\n        pageFrontmatter.value.backToTop !== false &&\n        scrollTop.value > props.threshold\n    );\n\n    // Get scroll distance\n    const getScrollTop = (): number =>\n      window.pageYOffset ||\n      document.documentElement.scrollTop ||\n      document.body.scrollTop ||\n      0;\n\n    onMounted(() => {\n      scrollTop.value = getScrollTop();\n    });\n\n    useEventListener(\n      \"scroll\",\n      useDebounceFn(() => {\n        scrollTop.value = getScrollTop();\n      }, 100)\n    );\n\n    return (): VNode =>\n      h(Transition, { name: \"fade\" }, () =>\n        show.value\n          ? h(\n              \"button\",\n              {\n                class: \"back-to-top\",\n                // hint text\n                \"aria-label\": locale.value.backToTop,\n                \"data-balloon-pos\": \"left\",\n                // Scroll to top\n                onClick: () => {\n                  window.scrollTo({ top: 0, behavior: \"smooth\" });\n                  scrollTop.value = 0;\n                },\n              },\n              h(BackToTopIcon)\n            )\n          : null\n      );\n  },\n});\n"],"names":["BackToTopIcon","h","IconBase","defineComponent","props","pageFrontmatter","usePageFrontmatter","locale","useLocaleConfig","scrollTop","ref","show","computed","getScrollTop","onMounted","useEventListener","useDebounceFn","Transition"],"mappings":"sUAKa,MAAAA,EAAqC,IAChDC,EAAEC,EAAU,CAAE,KAAM,aAAc,EAAG,IAAM,CACzCD,EAAE,OAAQ,CACR,EAAG,kRACL,CAAC,EACDA,EAAE,OAAQ,CACR,EAAG,oVACL,CAAC,CACH,CAAC,EAEHD,EAAc,YAAc,gBCF5B,IAAeG,EAAAA,EAAgB,CAC7B,KAAM,YAEN,MAAO,CAML,UAAW,CACT,KAAM,OACN,QAAS,GACX,CACF,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAkBC,IAClBC,EAASC,EAAgB,mBAAmB,EAG5CC,EAAYC,EAAI,CAAC,EAGjBC,EAAOC,EACX,IACEP,EAAgB,MAAM,YAAc,IACpCI,EAAU,MAAQL,EAAM,SAC5B,EAGMS,EAAe,IACnB,OAAO,aACP,SAAS,gBAAgB,WACzB,SAAS,KAAK,WACd,EAEF,OAAAC,EAAU,IAAM,CACdL,EAAU,MAAQI,EAAAA,CACpB,CAAC,EAEDE,EACE,SACAC,EAAc,IAAM,CAClBP,EAAU,MAAQI,EACpB,CAAA,EAAG,GAAG,CACR,EAEO,IACLZ,EAAEgB,EAAY,CAAE,KAAM,MAAO,EAAG,IAC9BN,EAAK,MACDV,EACE,SACA,CACE,MAAO,cAEP,aAAcM,EAAO,MAAM,UAC3B,mBAAoB,OAEpB,QAAS,IAAM,CACb,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,EAC9CE,EAAU,MAAQ,CACpB,CACF,EACAR,EAAED,CAAa,CACjB,EACA,IACN,CACJ,CACF,CAAC"}