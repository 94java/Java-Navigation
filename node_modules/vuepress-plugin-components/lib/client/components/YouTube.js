import{usePageLang as g}from"@vuepress/client";import{ref as c,computed as n,unref as u,onMounted as b,isRef as m,watch as v,defineComponent as w,h as p}from"vue";import{useEventListener as y}from"@vueuse/core";import"../styles/youtube.scss";const f=t=>typeof t=="string"?t:`${t}px`,S=(t,l=0)=>{const i=c(),d=n(()=>f(u(t.width)||"100%")),s=c("auto"),r=o=>{const e=u(t.height),h=u(t.ratio)||16/9;return e?f(e):`${Number(o)/h+u(l)}px`},a=()=>{s.value=r(i.value.clientWidth)};return b(()=>{a(),m(l)&&v(l,()=>a()),y("orientationchange",()=>a()),y("resize",()=>a())}),{el:i,width:d,height:s}};var L=w({name:"YouTube",props:{id:{type:String,default:""},title:{type:String,default:"A YouTube video"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:Number,default:16/9},autoplay:Boolean,loop:Boolean,showCc:Boolean,showAnnotations:Boolean,start:{type:Number,default:void 0},end:{type:Number,default:void 0},defaultCcLang:{type:String,default:""},uiLang:{type:String,default:""},listType:{type:String,default:""},list:{type:String,default:""},playlist:{type:String,default:""},disableControls:Boolean,disableFullscreen:Boolean,disableKeyboard:Boolean},setup(t){const l=g(),{el:i,width:d,height:s}=S(t),r=n(()=>t.id?`${t.id}?`:t.listType==="playlist"&&t.list?`?listType=playlist&list=${t.list.startsWith("PL")?t.list:`PL${t.list}`}&`:null),a=n(()=>{const e=new URLSearchParams;return t.autoplay&&e.set("autoplay","1"),t.loop&&e.set("loop","1"),t.showCc&&e.set("cc_load_policy","1"),t.showAnnotations&&e.set("iv_load_policy","3"),t.start&&e.set("start",t.start.toString()),t.end&&e.set("end",t.end.toString()),e.set("hl",t.uiLang||l.value),e.set("cc_lang_pref",t.defaultCcLang||l.value),e.set("color","white"),t.disableControls&&e.set("controls","0"),t.disableFullscreen&&e.set("fs","0"),t.disableKeyboard&&e.set("disablekb","1"),t.playlist&&e.set("playlist",t.playlist),e.toString()}),o=n(()=>r.value?`https://www.youtube.com/embed/${r.value}${a.value}`:null);return()=>o.value?[p("div",{class:"youtube-desc"},p("a",{class:"sr-only",href:o.value},t.title)),p("iframe",{ref:i,src:o.value,title:t.title,class:"youtube-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:d.value,height:s.value}})]:null}});export{L as default};
//# sourceMappingURL=YouTube.js.map
