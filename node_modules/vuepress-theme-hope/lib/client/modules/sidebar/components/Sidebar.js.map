{"version":3,"file":"Sidebar.js","sourceRoot":"","sources":["../../../../../src/client/modules/sidebar/components/Sidebar.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAEtC,OAAO,EAAE,kBAAkB,EAAE,MAAM,kCAAkC,CAAC;AACtE,OAAO,YAAY,MAAM,wDAAwD,CAAC;AAClF,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AAInF,OAAO,wBAAwB,CAAC;AAEhC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,SAAS;IAEf,KAAK,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE;QACrB,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,WAAW,GAAG,kBAAkB,EAAE,CAAC;QACzC,MAAM,YAAY,GAAG,eAAe,EAAE,CAAC;QACvC,MAAM,OAAO,GAAG,GAAG,EAAe,CAAC;QAEnC,SAAS,CAAC,GAAG,EAAE;YACb,gCAAgC;YAChC,KAAK,CACH,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAChB,CAAC,IAAI,EAAQ,EAAE;gBACb,0EAA0E;gBAC1E,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAC9C,iCAAiC,KAAK,CAAC,IAAI,GAAG,IAAI,IAAI,CACvD,CAAC;gBAEF,IAAI,CAAC,iBAAiB;oBAAE,OAAO;gBAE/B,wCAAwC;gBACxC,MAAM,EAAE,GAAG,EAAE,UAAU,EAAE,MAAM,EAAE,aAAa,EAAE,GAC9C,OAAO,CAAC,KAAM,CAAC,qBAAqB,EAAE,CAAC;gBACzC,oDAAoD;gBACpD,MAAM,EAAE,GAAG,EAAE,oBAAoB,EAAE,MAAM,EAAE,uBAAuB,EAAE,GAClE,iBAAiB,CAAC,qBAAqB,EAAE,CAAC;gBAE5C,iEAAiE;gBACjE,IAAI,oBAAoB,GAAG,UAAU;oBACnC,oCAAoC;oBACpC,iBAAiB,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBACzC,oEAAoE;qBAC/D,IACH,oBAAoB,GAAG,uBAAuB;oBAC9C,UAAU,GAAG,aAAa;oBAE1B,uCAAuC;oBACvC,iBAAiB,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAC5C,CAAC,CACF,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,OAAO,GAAU,EAAE,CACjB,CAAC,CACC,OAAO,EACP;YACE,KAAK,EAAE,CAAC,SAAS,EAAE,EAAE,WAAW,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YACnE,GAAG,EAAE,OAAO;SACb,EACD;YACE,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE;YAChB,KAAK,CAAC,SAAS,CAAC,EAAE,EAAE;gBAClB,CAAC,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC;YACjD,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE;SACpB,CACF,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { defineComponent, h, onMounted, watch, ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nimport { useThemeLocaleData } from \"@theme-hope/composables/index.js\";\nimport SidebarLinks from \"@theme-hope/modules/sidebar/components/SidebarLinks.js\";\nimport { useSidebarItems } from \"@theme-hope/modules/sidebar/composables/index.js\";\n\nimport type { VNode } from \"vue\";\n\nimport \"../styles/sidebar.scss\";\n\nexport default defineComponent({\n  name: \"SideBar\",\n\n  setup(_props, { slots }) {\n    const route = useRoute();\n    const themeLocale = useThemeLocaleData();\n    const sidebarItems = useSidebarItems();\n    const sidebar = ref<HTMLElement>();\n\n    onMounted(() => {\n      // scroll to active sidebar item\n      watch(\n        () => route.hash,\n        (hash): void => {\n          // get the active sidebar item DOM, whose href equals to the current route\n          const activeSidebarItem = document.querySelector(\n            `.sidebar a.sidebar-link[href=\"${route.path}${hash}\"]`\n          );\n\n          if (!activeSidebarItem) return;\n\n          // get the top and height of the sidebar\n          const { top: sidebarTop, height: sidebarHeight } =\n            sidebar.value!.getBoundingClientRect();\n          // get the top and height of the active sidebar item\n          const { top: activeSidebarItemTop, height: activeSidebarItemHeight } =\n            activeSidebarItem.getBoundingClientRect();\n\n          // when the active sidebar item overflows the top edge of sidebar\n          if (activeSidebarItemTop < sidebarTop)\n            // scroll to the top edge of sidebar\n            activeSidebarItem.scrollIntoView(true);\n          // when the active sidebar item overflows the bottom edge of sidebar\n          else if (\n            activeSidebarItemTop + activeSidebarItemHeight >\n            sidebarTop + sidebarHeight\n          )\n            // scroll to the bottom edge of sidebar\n            activeSidebarItem.scrollIntoView(false);\n        }\n      );\n    });\n\n    return (): VNode =>\n      h(\n        \"aside\",\n        {\n          class: [\"sidebar\", { \"hide-icon\": !themeLocale.value.sidebarIcon }],\n          ref: sidebar,\n        },\n        [\n          slots[\"top\"]?.(),\n          slots[\"default\"]?.() ||\n            h(SidebarLinks, { config: sidebarItems.value }),\n          slots[\"bottom\"]?.(),\n        ]\n      );\n  },\n});\n"]}