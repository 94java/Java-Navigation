{"version":3,"file":"articleInfo.js","sourceRoot":"","sources":["../../../../../src/client/modules/blog/composables/articleInfo.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,KAAK,CAAC;AACtC,OAAO,EACL,SAAS,EACT,WAAW,EACX,OAAO,EACP,MAAM,GACP,MAAM,wBAAwB,CAAC;AAEhC,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAClD,OAAO,EAAE,cAAc,EAAE,MAAM,cAAc,CAAC;AAC9C,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAC;AAGxC,OAAO,EAAE,kBAAkB,EAAE,MAAM,kCAAkC,CAAC;AAatE,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,IAAsB,EAAa,EAAE;IACpE,MAAM,WAAW,GAAG,kBAAkB,EAAE,CAAC;IAEzC,OAAO,QAAQ,CAAC,GAAG,EAAE;QACnB,MAAM,EAAE,kCAAwB,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAExD,IAAI,MAAM;YAAE,OAAO,SAAS,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,MAAM,KAAK,KAAK;YAAE,OAAO,EAAE,CAAC;QAEhC,OAAO,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACpD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAIF,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAAC,IAAsB,EAAe,EAAE;IACxE,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;IAErC,OAAO,QAAQ,CAAC,GAAG,EAAE,CACnB,WAAW,CAAC,IAAI,CAAC,KAAK,oCAA0B,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAC/D,IAAI;QACJ,IAAI,EAAE,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI;KACvC,CAAC,CAAC,CACJ,CAAC;AACJ,CAAC,CAAC;AAIF,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,IAAsB,EAAU,EAAE;IAC9D,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAE3B,OAAO,QAAQ,CAAC,GAAG,EAAE,CACnB,MAAM,CAAC,IAAI,CAAC,KAAK,+BAAqB,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACrD,IAAI;QACJ,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI;KAClC,CAAC,CAAC,CACJ,CAAC;AACJ,CAAC,CAAC;AAIF,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,IAAsB,EAAW,EAAE,CAChE,QAAQ,CAAC,GAAG,EAAE;IACZ,MAAM,EAAE,gCAAsB,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;IAEpD,OAAO,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACrC,CAAC,CAAC,CAAC;AAEL,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,KAG9B,EAGC,EAAE;IACF,MAAM,WAAW,GAAG,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACzC,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;IACrC,MAAM,MAAM,GAAG,gBAAgB,CAAC,WAAW,CAAC,CAAC;IAC7C,MAAM,QAAQ,GAAG,kBAAkB,CAAC,WAAW,CAAC,CAAC;IACjD,MAAM,GAAG,GAAG,aAAa,CAAC,WAAW,CAAC,CAAC;IACvC,MAAM,IAAI,GAAG,cAAc,CAAC,WAAW,CAAC,CAAC;IAEzC,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC;QAC3B,MAAM,EAAE,MAAM,CAAC,KAAK;QACpB,QAAQ,EAAE,QAAQ,CAAC,KAAK;QACxB,IAAI,EAAE,IAAI,CAAC,KAAK;QAChB,aAAa,EAAE,WAAW,CAAC,KAAK,yCAA+B,IAAI,EAAE;QACrE,GAAG,EAAE,GAAG,CAAC,KAAK;QACd,UAAU,EAAE,WAAW,CAAC,KAAK,sCAA4B,IAAI,KAAK;QAClE,WAAW,EAAE,WAAW,CAAC,KAAK,uCAA6B,IAAI,IAAI;QACnE,QAAQ,EAAE,KAAK,CAAC,IAAI;KACrB,CAAC,CAAC,CAAC;IAEJ,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IAE5D,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AACzB,CAAC,CAAC","sourcesContent":["import { computed, toRef } from \"vue\";\nimport {\n  getAuthor,\n  getCategory,\n  getDate,\n  getTag,\n} from \"vuepress-shared/client\";\n\nimport { useCategoryMap } from \"./categoryMap.js\";\nimport { useBlogOptions } from \"./options.js\";\nimport { useTagMap } from \"./tagMap.js\";\nimport { ArticleInfoType } from \"../../../../shared/index.js\";\n\nimport { useThemeLocaleData } from \"@theme-hope/composables/index.js\";\n\nimport type { ComputedRef, Ref } from \"vue\";\nimport type { AuthorInfo, DateInfo } from \"vuepress-shared\";\nimport type { PageInfoProps } from \"@theme-hope/modules/info/components/PageInfo.js\";\nimport type {\n  PageCategory,\n  PageTag,\n} from \"@theme-hope/modules/info/utils/index.js\";\nimport type { ArticleInfo, PageInfo } from \"../../../../shared/index.js\";\n\nexport type AuthorRef = ComputedRef<AuthorInfo[]>;\n\nexport const useArticleAuthor = (info: Ref<ArticleInfo>): AuthorRef => {\n  const themeLocale = useThemeLocaleData();\n\n  return computed(() => {\n    const { [ArticleInfoType.author]: author } = info.value;\n\n    if (author) return getAuthor(author);\n    if (author === false) return [];\n\n    return getAuthor(themeLocale.value.author, false);\n  });\n};\n\nexport type CategoryRef = ComputedRef<PageCategory[]>;\n\nexport const useArticleCategory = (info: Ref<ArticleInfo>): CategoryRef => {\n  const categoryMap = useCategoryMap();\n\n  return computed(() =>\n    getCategory(info.value[ArticleInfoType.category]).map((name) => ({\n      name,\n      path: categoryMap.value.map[name].path,\n    }))\n  );\n};\n\nexport type TagRef = ComputedRef<PageTag[]>;\n\nexport const useArticleTag = (info: Ref<ArticleInfo>): TagRef => {\n  const tagMap = useTagMap();\n\n  return computed(() =>\n    getTag(info.value[ArticleInfoType.tag]).map((name) => ({\n      name,\n      path: tagMap.value.map[name].path,\n    }))\n  );\n};\n\nexport type DateRef = ComputedRef<DateInfo | null>;\n\nexport const useArticleDate = (info: Ref<ArticleInfo>): DateRef =>\n  computed(() => {\n    const { [ArticleInfoType.date]: date } = info.value;\n\n    return date ? getDate(date) : null;\n  });\n\nexport const useArticleInfo = (props: {\n  info: ArticleInfo;\n  path: string;\n}): {\n  info: ComputedRef<PageInfoProps>;\n  items: ComputedRef<PageInfo[] | false | undefined>;\n} => {\n  const articleInfo = toRef(props, \"info\");\n  const blogOptions = useBlogOptions();\n  const author = useArticleAuthor(articleInfo);\n  const category = useArticleCategory(articleInfo);\n  const tag = useArticleTag(articleInfo);\n  const date = useArticleDate(articleInfo);\n\n  const info = computed(() => ({\n    author: author.value,\n    category: category.value,\n    date: date.value,\n    localizedDate: articleInfo.value[ArticleInfoType.localizedDate] || \"\",\n    tag: tag.value,\n    isOriginal: articleInfo.value[ArticleInfoType.isOriginal] || false,\n    readingTime: articleInfo.value[ArticleInfoType.readingTime] || null,\n    pageview: props.path,\n  }));\n\n  const items = computed(() => blogOptions.value.articleInfo);\n\n  return { info, items };\n};\n"]}