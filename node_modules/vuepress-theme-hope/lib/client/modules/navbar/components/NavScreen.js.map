{"version":3,"file":"NavScreen.js","sourceRoot":"","sources":["../../../../../src/client/modules/navbar/components/NavScreen.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,uBAAuB,EAAE,MAAM,kBAAkB,CAAC;AAC9E,OAAO,EACL,UAAU,EACV,eAAe,EACf,CAAC,EACD,GAAG,EACH,eAAe,EACf,KAAK,GACN,MAAM,KAAK,CAAC;AACb,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAEtC,OAAO,EAAE,SAAS,EAAE,MAAM,kCAAkC,CAAC;AAC7D,OAAO,cAAc,MAAM,yDAAyD,CAAC;AACrF,OAAO,eAAe,MAAM,2DAA2D,CAAC;AAIxF,OAAO,2BAA2B,CAAC;AAEnC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,WAAW;IAEjB,KAAK,EAAE;QACL;;;;WAIG;QACH,IAAI,EAAE,OAAO;KACd;IAED,KAAK,EAAE;QACL,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI;KAClB;IAED,KAAK,CAAC,KAAK,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE;QAC1B,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;QACzB,MAAM,QAAQ,GAAG,SAAS,EAAE,CAAC;QAC7B,MAAM,MAAM,GAAG,GAAG,EAAe,CAAC;QAElC,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;YACxB,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE;gBACxB,uBAAuB,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,CAAC;aACf;QACH,CAAC,CAAC,CAAC;QAEH,KAAK,CACH,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAChB,GAAG,EAAE;YACH,uBAAuB,EAAE,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,CAAC;QAChB,CAAC,CACF,CAAC;QAEF,eAAe,CAAC,GAAG,EAAE;YACnB,uBAAuB,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,OAAO,GAAU,EAAE,CACjB,CAAC,CACC,UAAU,EACV;YACE,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,GAAG,EAAE,CACZ,iBAAiB,CAAC,MAAM,CAAC,KAAM,EAAE,EAAE,mBAAmB,EAAE,IAAI,EAAE,CAAC;YACjE,YAAY,EAAE,GAAG,EAAE,CAAC,uBAAuB,EAAE;SAC9C,EACD,GAAG,EAAE,CACH,KAAK,CAAC,IAAI;YACR,CAAC,CAAC,CAAC,CACC,KAAK,EACL,EAAE,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,MAAM,EAAE,EACjC,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE;gBAC/B,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE;gBACnB,CAAC,CAAC,cAAc,CAAC;gBACjB,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,iBAAiB,EAAE,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC;gBAC1D,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE;aACnB,CAAC,CACH;YACH,CAAC,CAAC,IAAI,CACX,CAAC;IACN,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { disableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\nimport {\n  Transition,\n  defineComponent,\n  h,\n  ref,\n  onBeforeUnmount,\n  watch,\n} from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nimport { useMobile } from \"@theme-hope/composables/index.js\";\nimport NavScreenLinks from \"@theme-hope/modules/navbar/components/NavScreenLinks.js\";\nimport OutlookSettings from \"@theme-hope/modules/outlook/components/OutlookSettings.js\";\n\nimport type { VNode } from \"vue\";\n\nimport \"../styles/nav-screen.scss\";\n\nexport default defineComponent({\n  name: \"NavScreen\",\n\n  props: {\n    /**\n     * Whether to show the screen\n     *\n     * 是否显示\n     */\n    show: Boolean,\n  },\n\n  emits: {\n    close: () => true,\n  },\n\n  setup(props, { emit, slots }) {\n    const route = useRoute();\n    const isMobile = useMobile();\n    const screen = ref<HTMLElement>();\n\n    watch(isMobile, (value) => {\n      if (!value && props.show) {\n        clearAllBodyScrollLocks();\n        emit(\"close\");\n      }\n    });\n\n    watch(\n      () => route.path,\n      () => {\n        clearAllBodyScrollLocks();\n        emit(\"close\");\n      }\n    );\n\n    onBeforeUnmount(() => {\n      clearAllBodyScrollLocks();\n    });\n\n    return (): VNode =>\n      h(\n        Transition,\n        {\n          name: \"fade\",\n          onEnter: () =>\n            disableBodyScroll(screen.value!, { reserveScrollBarGap: true }),\n          onAfterLeave: () => clearAllBodyScrollLocks(),\n        },\n        () =>\n          props.show\n            ? h(\n                \"div\",\n                { id: \"nav-screen\", ref: screen },\n                h(\"div\", { class: \"container\" }, [\n                  slots[\"before\"]?.(),\n                  h(NavScreenLinks),\n                  h(\"div\", { class: \"outlook-wrapper\" }, h(OutlookSettings)),\n                  slots[\"after\"]?.(),\n                ])\n              )\n            : null\n      );\n  },\n});\n"]}