{"version":3,"file":"frontmatter.js","sourceRoot":"","sources":["../../../src/node/compact/frontmatter.ts"],"names":[],"mappings":"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","sourcesContent":["import { deprecatedLogger, droppedLogger } from \"./utils.js\";\nimport { logger } from \"../utils.js\";\n\nimport type { ThemePageFrontmatter } from \"../../shared/index.js\";\n\nconst DEPRECATED_FRONTMATTER_OPTIONS: [string, string][] = [\n  [\"authors\", \"author\"],\n  [\"categories\", \"category\"],\n  [\"tags\", \"tags\"],\n  [\"time\", \"date\"],\n  [\"visitor\", \"pageview\"],\n  [\"sidebarDepth\", \"headerDepth\"],\n  [\"copyrightText\", \"copyright\"],\n  [\"anchorDisplay\", \"toc\"],\n  [\"updateTime\", \"lastUpdated\"],\n  [\"contributor\", \"contributors\"],\n  [\"editLinks\", \"editLink\"],\n];\n\nconst DEPRECATED_HOME_FRONTMATTER_OPTIONS: [string, string][] = [\n  [\"title\", \"heroText\"],\n  [\"darkHeroImage\", \"heroImageDark\"],\n  [\"action\", \"actions\"],\n];\n\nconst DROPPED_FRONTMATTER_OPTIONS: [string, string][] = [\n  [\"metaTitle\", \"Please use custom resolver to set metaTitle.\"],\n  [\"mediaLink\", \"Social media links are no longer displayed in footer.\"],\n  [\"password\", \"Simple password protection is no longer supported.\"],\n  [\"search\", \"Search plugin no longer support this option.\"],\n];\n\n/**\n * @deprecated You should use V2 standard frontmatter and avoid using it\n */\nexport const convertFrontmatter = (\n  frontmatter: Record<string, unknown>,\n  filePathRelative = \"\"\n): ThemePageFrontmatter & Record<string, unknown> => {\n  DEPRECATED_FRONTMATTER_OPTIONS.forEach(([deprecatedOption, newOption]) =>\n    deprecatedLogger({\n      options: frontmatter,\n      deprecatedOption,\n      newOption,\n      scope: `${filePathRelative || \"\"} frontmatter`,\n    })\n  );\n\n  DROPPED_FRONTMATTER_OPTIONS.forEach((item) =>\n    droppedLogger(\n      frontmatter,\n      ...item,\n      `${filePathRelative ? `Found in ${filePathRelative}` : \"\"}`\n    )\n  );\n\n  if (\"meta\" in frontmatter) {\n    logger.warn(\n      `\"meta\" in frontmatter is deprecated in V2, please use \"head\" instead.${\n        filePathRelative ? `Found in ${filePathRelative}` : \"\"\n      }`\n    );\n\n    frontmatter[\"head\"] = [\n      ...((frontmatter[\"head\"] as unknown[]) || []),\n      (frontmatter[\"meta\"] as unknown[]).map((item) => [\"meta\", item]),\n    ];\n\n    delete frontmatter[\"meta\"];\n  }\n\n  if (\"canonicalUrl\" in frontmatter) {\n    logger.warn(\n      `\"canonicalUrl\" in frontmatter is deprecated, please use \"head\" instead.${\n        filePathRelative ? `Found in ${filePathRelative}` : \"\"\n      }`\n    );\n\n    frontmatter[\"head\"] = [\n      ...((frontmatter[\"head\"] as unknown[]) || []),\n      [\"link\", { rel: \"canonical\", href: frontmatter[\"canonicalUrl\"] }],\n    ];\n\n    delete frontmatter[\"canonicalUrl\"];\n  }\n\n  // check homepage\n  if (frontmatter[\"home\"] === true && !(\"layout\" in frontmatter)) {\n    DEPRECATED_HOME_FRONTMATTER_OPTIONS.forEach(\n      ([deprecatedOption, newOption]) =>\n        deprecatedLogger({\n          options: frontmatter,\n          deprecatedOption,\n          newOption,\n          scope: `${filePathRelative || \"\"} frontmatter`,\n        })\n    );\n  }\n\n  return frontmatter;\n};\n"]}