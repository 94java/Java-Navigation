{"version":3,"file":"seo.js","sourceRoot":"","sources":["../../../src/node/plugins/seo.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,sBAAsB,CAAC;AACjD,OAAO,EAAE,cAAc,EAAE,MAAM,WAAW,CAAC;AAK3C,MAAM,CAAC,MAAM,YAAY,GAAG,CAC1B,SAAoB,EACpB,EAAE,IAAI,EAAE,GAAG,EAAkB,EAC7B,QAAQ,GAAG,EAAE,EACb,MAAM,GAAG,KAAK,EACC,EAAE;IACjB,IAAI,GAAG,KAAK,KAAK;QAAE,OAAO,IAAI,CAAC;IAC/B,MAAM,UAAU,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IAEtD,qEAAqE;IACrE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,IAAI,CAAC,QAAQ;QAAE,OAAO,IAAI,CAAC;IAE9D,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;IAEzC,MAAM,SAAS,GAAG,CAAC,EACjB,gBAAgB,EAChB,WAAW,EACX,UAAU,EACV,IAAI,GACC,EAAW,EAAE;QAClB,IAAI,CAAC,gBAAgB,IAAI,WAAW,CAAC,MAAM,CAAC;YAAE,OAAO,KAAK,CAAC;QAE3D,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,IAAI,UAAU,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;QAEnE,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;aAC/B,MAAM,CACL,CAAC,IAAI,EAA4B,EAAE,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,CAChE;aACA,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;IACzD,CAAC,CAAC;IAEF,OAAO,SAAS,CACd;QACE,QAAQ;QACR,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QACzD,SAAS;QACT,GAAG,UAAU;KACd,EACD,MAAM,CACP,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { seoPlugin } from \"vuepress-plugin-seo2\";\nimport { getBlogOptions } from \"./blog.js\";\n\nimport type { Page, Plugin } from \"@vuepress/core\";\nimport type { ThemeData, PluginsOptions } from \"../../shared/index.js\";\n\nexport const getSEOPlugin = (\n  themeData: ThemeData,\n  { blog, seo }: PluginsOptions,\n  hostname = \"\",\n  legacy = false\n): Plugin | null => {\n  if (seo === false) return null;\n  const seoOptions = typeof seo === \"object\" ? seo : {};\n\n  // disable seo if `hostname` is not set and no options for seo plugin\n  if (!Object.keys(seoOptions).length && !hostname) return null;\n\n  const blogOptions = getBlogOptions(blog);\n\n  const isArticle = ({\n    filePathRelative,\n    frontmatter,\n    pathLocale,\n    path,\n  }: Page): boolean => {\n    if (!filePathRelative || frontmatter[\"home\"]) return false;\n\n    const localePath = path.replace(new RegExp(`^${pathLocale}`), \"/\");\n\n    return Object.entries(blogOptions)\n      .filter<[string, string]>(\n        (item): item is [string, string] => typeof item[1] === \"string\"\n      )\n      .every(([, value]) => !localePath.startsWith(value));\n  };\n\n  return seoPlugin(\n    {\n      hostname,\n      ...(themeData.author ? { author: themeData.author } : {}),\n      isArticle,\n      ...seoOptions,\n    },\n    legacy\n  );\n};\n"]}