{"version":3,"file":"themeData.js","sourceRoot":"","sources":["../../../src/node/config/themeData.ts"],"names":[],"mappings":"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","sourcesContent":["import { getLocales } from \"vuepress-shared/node\";\nimport { getEncryptConfig } from \"./encrypt.js\";\nimport { themeLocalesData } from \"../locales/index.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { ThemeStatus } from \"./status.js\";\nimport {\n  ThemeData,\n  ThemeLocaleConfig,\n  ThemeLocaleOptions,\n  ThemeOptions,\n} from \"../../shared/index.js\";\n\nconst rootAllowConfig = [\n  \"blog\",\n  \"encrypt\",\n  \"pure\",\n  \"darkmode\",\n  \"themeColor\",\n  \"fullscreen\",\n  \"mobileBreakPoint\",\n];\n\nconst defaultRootOptions: Omit<ThemeData, \"locales\"> = {\n  // features\n  blog: {},\n  encrypt: {},\n\n  // appearance\n  pure: false,\n  darkmode: \"switch\",\n  themeColor: false,\n  fullscreen: false,\n};\n\nconst defaultLocaleOptions: ThemeLocaleOptions = {\n  // features\n  blog: {},\n  // layouts\n  repoDisplay: true,\n  navbarIcon: true,\n  navbarAutoHide: \"mobile\",\n  hideSiteNameOnMobile: true,\n  sidebar: \"structure\",\n  sidebarIcon: true,\n  headerDepth: 2,\n};\n\n/**\n * Get client-side `themeData`\n */\nexport const getThemeData = (\n  app: App,\n  themeOptions: ThemeOptions,\n  { enableBlog }: ThemeStatus\n): ThemeData => {\n  const themeData: ThemeData = {\n    ...defaultRootOptions,\n    ...Object.fromEntries(\n      Object.entries(themeOptions).filter(([key]) =>\n        rootAllowConfig.includes(key)\n      )\n    ),\n    locales:\n      // assign locale data to `themeConfig`\n      getLocales({\n        app,\n        name: \"vuepress-theme-hope\",\n        default: Object.fromEntries(\n          Object.entries(themeLocalesData).map(([locale, config]) => {\n            if (!enableBlog) {\n              // @ts-ignore\n              delete config.blogLocales;\n\n              // @ts-ignore\n              delete config.paginationLocales;\n            }\n\n            return [\n              locale,\n              <ThemeLocaleConfig>{\n                // default config\n                ...defaultLocaleOptions,\n                ...config,\n              },\n            ];\n          })\n        ),\n        // extract localeConfig\n        config: Object.fromEntries(\n          [\n            <[string, ThemeLocaleOptions]>[\"/\", {}],\n            ...Object.entries(themeOptions.locales || {}),\n          ].map<[string, ThemeLocaleConfig]>(([localePath, localeConfig]) => [\n            localePath,\n            <ThemeLocaleConfig>{\n              // root config\n              ...Object.fromEntries(\n                Object.entries(themeOptions).filter(\n                  ([key]) => key !== \"locales\" && !rootAllowConfig.includes(key)\n                )\n              ),\n              // locale options\n              ...localeConfig,\n            },\n          ])\n        ),\n      }),\n  };\n\n  // handle encrypt options\n  themeData.encrypt = getEncryptConfig(themeData.encrypt);\n\n  if (app.env.isDebug) console.log(\"Theme config: \", themeData);\n\n  return themeData;\n};\n"]}