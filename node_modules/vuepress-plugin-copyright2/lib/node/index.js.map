{"version":3,"file":"index.js","sources":["../../src/node/locales.ts","../../src/node/utils.ts","../../src/node/plugins.ts"],"sourcesContent":["import type { CopyrightLocaleConfig } from \"../shared/index.js\";\n\n/** Multi language config for copyright */\nexport const copyrightLocales: CopyrightLocaleConfig = {\n  \"/en/\": {\n    author: \"Copyright by :author\",\n    license: \"License under :license\",\n    link: \":link\",\n  },\n\n  \"/zh/\": {\n    author: \"著作权归:author所有\",\n    license: \"基于:license协议\",\n    link: \"原文链接：:link\",\n  },\n\n  \"/ru/\": {\n    author: \"Авторские права :author\",\n    license: \"Лицензия :license\",\n    link: \":link\",\n  },\n\n  \"/pl/\": {\n    author: \"Prawa autorskie :author\",\n    license: \"Licencja :license\",\n    link: \":link\",\n  },\n\n  \"/sk/\": {\n    author: \"Autorské práva :author\",\n    license: \"Licencia :license\",\n    link: \":link\",\n  },\n\n  \"/fr/\": {\n    author: \"Copyright par :author\",\n    license: \"Sous licence :license\",\n    link: \":link\",\n  },\n\n  \"/es/\": {\n    author: \"Derechos de autor :author\",\n    license: \"Licencia :license\",\n    link: \":link\",\n  },\n\n  \"/ja/\": {\n    author: \"著作権者 :author\",\n    license: \":licenseプロトコルに基づく\",\n    link: \":link\",\n  },\n\n  \"/tr/\": {\n    author: \"Telif hakkı sahibi :author\",\n    license: \"Lisans :license\",\n    link: \":link\",\n  },\n\n  \"/ko/\": {\n    author: \"저작권자 :author\",\n    license: \":license 프로토콜에 따라\",\n    link: \":link\",\n  },\n};\n","import { Logger } from \"vuepress-shared/node\";\n\nexport const logger = new Logger(\"vuepress-plugin-copyright2\");\n","import {\n  isLinkHttp,\n  removeEndingSlash,\n  removeLeadingSlash,\n} from \"@vuepress/shared\";\nimport { getDirname, path } from \"@vuepress/utils\";\nimport { getLocales } from \"vuepress-shared/node\";\n\nimport { copyrightLocales } from \"./locales.js\";\nimport { logger } from \"./utils.js\";\n\nimport type { Page, PluginFunction } from \"@vuepress/core\";\nimport type { CopyrightOptions } from \"./options.js\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const copyrightPlugin =\n  (options: CopyrightOptions): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info(`Options: ${options.toString()}`);\n\n    const {\n      hostname,\n      author = \"\",\n      license = \"\",\n      disableCopy = false,\n      disableSelection = false,\n      global = false,\n      triggerWords = 100,\n      locales,\n    } = options;\n\n    const currentLocales = getLocales({\n      app,\n      name: \"copyright\",\n      default: copyrightLocales,\n      config: locales,\n    });\n\n    return {\n      name: \"vuepress-plugin-copyright2\",\n\n      define: (): Record<string, unknown> => ({\n        COPYRIGHT_GLOBAL: global,\n        COPYRIGHT_DISABLE_COPY: disableCopy,\n        COPYRIGHT_DISABLE_SELECTION: disableSelection,\n        COPYRIGHT_TRIGGER_WORDS: triggerWords,\n      }),\n\n      extendsPage: (page: Page<{ copyright?: string }>, app): void => {\n        const { base } = app.options;\n        const locale = currentLocales[page.pathLocale];\n\n        const authorText = author\n          ? locale.author.replace(\n              \":author\",\n              typeof author === \"function\" ? author(page) : author\n            )\n          : \"\";\n\n        const licenseText = license\n          ? locale.license.replace(\n              \":license\",\n              typeof license === \"function\" ? license(page) : license\n            )\n          : \"\";\n\n        const linkText = hostname\n          ? locale.link.replace(\n              \":link\",\n              `${\n                isLinkHttp(hostname)\n                  ? removeEndingSlash(hostname)\n                  : `https://${removeEndingSlash(hostname)}`\n              }${base}${removeLeadingSlash(page.path)}`\n            )\n          : \"\";\n\n        page.data.copyright = [authorText, licenseText, linkText]\n          .filter((item) => item)\n          .join(\"\\n\");\n      },\n\n      clientConfigFile: path.resolve(__dirname, \"../client/config.js\"),\n    };\n  };\n"],"names":["copyrightLocales","logger","Logger","__dirname","getDirname","copyrightPlugin","options","app","hostname","author","license","disableCopy","disableSelection","global","triggerWords","locales","currentLocales","getLocales","page","base","locale","authorText","licenseText","linkText","isLinkHttp","removeEndingSlash","removeLeadingSlash","item","path"],"mappings":"kNAGO,MAAMA,EAA0C,CACrD,OAAQ,CACN,OAAQ,uBACR,QAAS,yBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,gBACR,QAAS,eACT,KAAM,YACR,EAEA,OAAQ,CACN,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,0BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,yBACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,wBACR,QAAS,wBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,4BACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,eACR,QAAS,oBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,6BACR,QAAS,kBACT,KAAM,OACR,EAEA,OAAQ,CACN,OAAQ,eACR,QAAS,oBACT,KAAM,OACR,CACF,EC7DaC,EAAS,IAAIC,EAAO,4BAA4B,ECYvDC,EAAYC,EAAW,YAAY,GAAG,EAE/BC,EACVC,GACAC,GAAQ,CACHA,EAAI,IAAI,SAASN,EAAO,KAAK,YAAYK,EAAQ,SAAY,GAAA,EAEjE,KAAM,CACJ,SAAAE,EACA,OAAAC,EAAS,GACT,QAAAC,EAAU,GACV,YAAAC,EAAc,GACd,iBAAAC,EAAmB,GACnB,OAAAC,EAAS,GACT,aAAAC,EAAe,IACf,QAAAC,CACF,EAAIT,EAEEU,EAAiBC,EAAW,CAChC,IAAAV,EACA,KAAM,YACN,QAASP,EACT,OAAQe,CACV,CAAC,EAED,MAAO,CACL,KAAM,6BAEN,OAAQ,KAAgC,CACtC,iBAAkBF,EAClB,uBAAwBF,EACxB,4BAA6BC,EAC7B,wBAAyBE,CAC3B,GAEA,YAAa,CAACI,EAAoCX,IAAc,CAC9D,KAAM,CAAE,KAAAY,CAAK,EAAIZ,EAAI,QACfa,EAASJ,EAAeE,EAAK,YAE7BG,EAAaZ,EACfW,EAAO,OAAO,QACZ,UACA,OAAOX,GAAW,WAAaA,EAAOS,CAAI,EAAIT,CAChD,EACA,GAEEa,EAAcZ,EAChBU,EAAO,QAAQ,QACb,WACA,OAAOV,GAAY,WAAaA,EAAQQ,CAAI,EAAIR,CAClD,EACA,GAEEa,EAAWf,EACbY,EAAO,KAAK,QACV,QACA,GACEI,EAAWhB,CAAQ,EACfiB,EAAkBjB,CAAQ,EAC1B,WAAWiB,EAAkBjB,CAAQ,MACxCW,IAAOO,EAAmBR,EAAK,IAAI,GACxC,EACA,GAEJA,EAAK,KAAK,UAAY,CAACG,EAAYC,EAAaC,CAAQ,EACrD,OAAQI,GAASA,CAAI,EACrB,KAAK;AAAA,CAAI,CACd,EAEA,iBAAkBC,EAAK,QAAQzB,EAAW,qBAAqB,CACjE,CACF"}